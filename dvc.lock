schema: '2.0'
stages:
  pull_data:
    cmd: python src/pull_data.py data/db_pull_calibrated.parquet data/db_pull_uncalibrated.parquet
    deps:
    - path: src/pull_data.py
      md5: 47d3bcadedf1f9db0bca7597375c6e22
      size: 1432
    - path: src/utils/dbconnector.py
      md5: 7d87ce109d5d15d6ae8b4c4367bc2271
      size: 1547
    params:
      params.yaml:
        database.questdb:
          table_name: prod
          host: docker.great-squeaker.ts.net
          port: 9000
    outs:
    - path: data/db_pull_calibrated.parquet
      md5: d30e256f1a00d82ece6f07422261055a
      size: 135521717
    - path: data/db_pull_uncalibrated.parquet
      md5: b63f1578c5b0cc51b5aafcfb09a00458
      size: 128520845
  resample:
    cmd: python src/resample.py data/db_pull_calibrated.parquet 50 linear
    deps:
    - path: data/db_pull_calibrated.parquet
      md5: d30e256f1a00d82ece6f07422261055a
      size: 135521717
    - path: src/resample.py
      md5: 69a6d5f6f27c941aa0e80ede9e597592
      size: 960
    outs:
    - path: data/resample.parquet
      md5: 816b70cbdfd4208db96e8525156c821f
      size: 88337427
  pca:
    cmd: python src/pca.py data/resample.parquet 6
    deps:
    - path: data/resample.parquet
      md5: 816b70cbdfd4208db96e8525156c821f
      size: 88337427
    - path: src/pca.py
      md5: fa8774263d82bc518a08bc55e10aeb20
      size: 1034
    outs:
    - path: data/pca.parquet
      md5: 1ca7ff51a0f4752b0094d43e6320b8b4
      size: 67273633
  segmentate:
    cmd: python src/segmentate.py data/resample.parquet 5 0
    deps:
    - path: data/resample.parquet
      md5: 816b70cbdfd4208db96e8525156c821f
      size: 88337427
    - path: src/segmentate.py
      md5: 637d6890bb0ac46bc3abede3e5fdd081
      size: 2165
    outs:
    - path: data/segmentate.dill
      md5: 59c7cf3230d74ecc1aaebba0757b0bd2
      size: 124896710
  aggregate:
    cmd: python src/aggregate.py data/segmentate.dill data/aggregate.dill
    deps:
    - path: data/segmentate.dill
      md5: 59c7cf3230d74ecc1aaebba0757b0bd2
      size: 124896710
    - path: src/aggregate.py
      md5: ba4c2c1c7cde8cb69112a545aabb9ec3
      size: 1617
    params:
      params.yaml:
        aggregate:
        - mean
        - median
        - std
    outs:
    - path: data/aggregate.dill
      md5: 33445fc583137eab35cc451478602d22
      size: 4774687
