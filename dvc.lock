schema: '2.0'
stages:
  pull_data:
    cmd: python src/pull_data.py data/db_pull_calibrated.parquet data/db_pull_uncalibrated.parquet
    deps:
    - path: src/pull_data.py
      md5: 47d3bcadedf1f9db0bca7597375c6e22
      size: 1372
    - path: src/utils/dbconnector.py
      md5: 7d87ce109d5d15d6ae8b4c4367bc2271
      size: 1488
    params:
      params.yaml:
        database.questdb:
          table_name: prod
          host: docker.great-squeaker.ts.net
          port: 9000
    outs:
    - path: data/db_pull_calibrated.parquet
      md5: d30e256f1a00d82ece6f07422261055a
      size: 135521717
    - path: data/db_pull_uncalibrated.parquet
      md5: b63f1578c5b0cc51b5aafcfb09a00458
      size: 128520845
  resample:
    cmd: python src/resample.py data/db_pull_calibrated.parquet 50 linear
    deps:
    - path: data/db_pull_calibrated.parquet
      md5: d30e256f1a00d82ece6f07422261055a
      size: 135521717
    - path: src/resample.py
      md5: 69a6d5f6f27c941aa0e80ede9e597592
      size: 926
    outs:
    - path: data/resample.parquet
      md5: 816b70cbdfd4208db96e8525156c821f
      size: 88337427
  segmentate:
    cmd: python src/segmentate.py data/resample.parquet 5 0
    deps:
    - path: data/resample.parquet
      md5: 816b70cbdfd4208db96e8525156c821f
      size: 88337427
    - path: src/segmentate.py
      md5: 637d6890bb0ac46bc3abede3e5fdd081
      size: 2165
    outs:
    - path: data/segmentate.dill
      md5: f3c8c1ee0cfa27e9d18b2fd563c2ff2f
      size: 142338896
  moving_average:
    cmd: python src/moving_average.py data/resample.parquet data/moving_average.parquet
    deps:
    - path: data/resample.parquet
      md5: 816b70cbdfd4208db96e8525156c821f
      size: 88337427
    - path: src/moving_average.py
      md5: 33a90e13daee9322ddc9c55842b4a134
      size: 1490
    params:
      params.yaml:
        moving_average.window_len_s: 0.5
    outs:
    - path: data/moving_average.parquet
      md5: 26bad3a684ad1e3caf9a2dc8f144b95c
      size: 138287096
  pca:
    cmd: python src/pca.py data/resample.parquet 6
    deps:
    - path: data/resample.parquet
      md5: 816b70cbdfd4208db96e8525156c821f
      size: 88337427
    - path: src/pca.py
      md5: fa8774263d82bc518a08bc55e10aeb20
      size: 995
    outs:
    - path: data/pca.parquet
      md5: f8ae28341fe1f85930acbcdb150b3ece
      size: 67273171
  dvclive:
    cmd: python src/model_runner.py data/correlations.parquet data/train_test_split.json
      MLP Tabular 72 6 --num_epochs 1
    deps:
    - path: data/correlations.parquet
      md5: a1e87229a3157e95095d925dec56928d
      size: 6067695
    - path: data/train_test_split.json
      md5: 20a5446519af97f135682be727731a9f
      size: 49755
    - path: src/model_runner.py
      md5: c86940d9e7d7dd8a8dc10ac864f2f365
      size: 3044
    - path: src/models/MLP.py
      md5: 90647a0a9f6bcf0e5b0473a7c01b246f
      size: 1557
    - path: src/models/__IModel.py
      md5: eb2d941d7d6c6378848bd6dd6f662a5a
      size: 1811
    - path: src/models/utils/DataLoaderTabular.py
      md5: eefa1485621e2725a57f77958f4f5c4a
      size: 3712
    - path: src/models/utils/DataSetTabular.py
      md5: fea93aac0c6f741cf12f95f82fa82eb7
      size: 330
    params:
      params.yaml:
        OneHotEncode:
          Sitzen: 0
          Laufen: 1
          Velofahren: 2
          Rennen: 3
          Stehen: 4
          Treppenlaufen: 5
  train_test_split:
    cmd: python src/train_test_split.py data/segmentate.dill data/train_test_split.json
    deps:
    - path: data/segmentate.dill
      md5: f3c8c1ee0cfa27e9d18b2fd563c2ff2f
      size: 142338896
    - path: src/train_test_split.py
      md5: 94d67eaa3fad9cbf073cfda7c3327ee2
      size: 2630
    params:
      params.yaml:
        train_test_split:
          type: person
          test_ratio: 0.2
          seed: 9458
          stratified: true
    outs:
    - path: data/train_test_split.json
      md5: 20a5446519af97f135682be727731a9f
      size: 49755
  correlations:
    cmd: python src/correlations.py data/segmentate.dill data/correlations.parquet
      pearson
    deps:
    - path: data/segmentate.dill
      md5: f3c8c1ee0cfa27e9d18b2fd563c2ff2f
      size: 142338896
    - path: src/correlations.py
      md5: d054e4a6858b0cccb2d419f62552dd5e
      size: 1870
    outs:
    - path: data/correlations.parquet
      md5: a1e87229a3157e95095d925dec56928d
      size: 6067695
